# xiaomeiyong
小没用是一个开放的、功能十分简陋的语音助手，可以简单地部署为智能家居的一部分。<br>
这是一个玩具项目，之后也不会再更新。<br>
<br>来都来了，祝你玩得开心！<br>
***

## 功能
### 唤醒和休眠
首先说出“小没用”来唤醒小没用，之后的功能都需要在唤醒状态下使用。<br>
**在唤醒状态下会启动在线语音识别，请注意保护隐私！** <br>
说出“小没用爬”来主动让小没用休眠。在一分钟没有响应后，小没用也会自动休眠。<br>
小没用在被主动唤醒和休眠时会有语音提示。<br>
### 夸黄白猫！
说出“夸黄白猫”，小没用就会夸一句黄白猫！<br>
同样地，对“夸/骂 黄白猫/黑猫”做了特殊响应。<br>
### 日期和时间
说出带“几号”、“几点”的句子，小没用会报告当前的日期或时间。<br>
### 闹钟
小没用会维护一个高级闹钟，可以创建多个仅一次或每天的闹钟，也可以自由地删除闹钟或查询列表。<br>
闹钟是24小时制的，同时会保存到硬盘，程序重启会保留原来的设置。<br><br>
设定闹钟：句子含“闹钟”和"设"或"定"等，并能正确解析时间。若不含“每天”，则闹钟仅一次有效，否则闹钟将每天响起。默认的闹钟铃声为《起床号》。例句：帮我设一个每天下午三点半的闹钟。<br><br>
删除闹钟：句子含“闹钟”和"删"或"取消"等，并能正确解析时间。例句：取消下午三点半的闹钟。<br>
你还可以删除全部闹钟，例句：删除全部/所有闹钟。<br><br>
查询闹钟列表：小没用将会按设定先后念出所有的闹钟信息。例句：“闹钟列表”/“列出所有闹钟”。<br>
### 开机
说出“开机”或“开电脑”，小没用会按script/wake_on_lan.txt中记录的MAC地址和IP地址广播唤醒包。<br>
被唤醒的电脑需在BIOS中开启网络唤醒才可以声控开机。<br>
### 播放音乐
说出“播放XXX”或“唱XXX”，小没用会在music文件夹中搜索标题在XXX中的音乐文件并播放。<br>
例句：“唱生日快乐歌。”<br>
### 自定义语句
可以在script/q_and_a.txt中自定义一对一的响应语句。<br>
*当然你都看到这了，改起代码来肯定没问题。* <br>
***

## 方案概述
小没用需要用到录音、语音识别、语音合成、播放声音的功能，还有一点简单的逻辑以对输入做出反应。<br>
### 语音识别
使用[ASRT](https://github.com/nl8590687/ASRT_SpeechRecognition)作为离线语音识别工具。<br>
在识别到“小没用”三个字后会启动在线语音识别，当前设置为[腾讯云的语音识别方案](https://cloud.tencent.com/product/asr)，提供每月免费5000次的一句话识别。<br>
在识别到“小没用爬”后会关闭在线识别。<br>
### 语音合成
使用[zhtts](https://github.com/Jackiexiao/zhtts)作为离线语音合成工具。<br>
<br>*给他们点个☆星星☆吧~*<br>
### 录音和播放声音
使用PyAudio库进行录音。<br>
播放声音方面，Windows下使用winsound，Linux下使用playsound库。<br>
***

## 配置
小没用为纯Python代码，测试版本为3.8.10、3.9.5。<br>
> pip install tencentcloud-sdk-python wakeonlan matplotlib python_speech_features playsound zhtts pyaudio <br>
> pip install -v tensorflow-cpu==2.5.0 keras==2.4.3 <br>

此外，还需要自行在wav2text.py中配置腾讯云的secret_id和secret_key，或换用其它方案。<br>
声控开机功能也需要自行在script/wake_on_lan.txt中配置MAC地址。<br>
运行main.py即可启动。听到“你好，我叫小没用”代表初始化完成。<br>
***

**☆ Have Fun! ☆** <br>
AowuCat<br>
2021-10-7<br>
